<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Keep the same CSS styles -->
    <style>
        /* Previous CSS remains unchanged */
        .error-message {
            color: #ff4444;
            font-size: 0.9em;
            margin-top: 5px;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Previous HTML structure remains same until input section -->
        
        <div class="input-row">
            <div class="input-group">
                <label>Daily Bricklaying Capacity</label>
                <input type="number" id="dailyCapacity" value="500" min="1">
                <div class="error-message" id="capacityError">Invalid daily capacity</div>
            </div>
            <div class="input-group">
                <label>Cement Density (kg/mÂ³)</label>
                <input type="number" id="cementDensity" value="1440" min="500">
                <div class="error-message" id="densityError">Invalid density value</div>
            </div>
            <div class="input-group">
                <label>Wastage Percentage (%)</label>
                <input type="number" id="wastage" value="5" min="0" max="100">
                <div class="error-message" id="wastageError">Invalid wastage percentage</div>
            </div>
        </div>

        <!-- Add error message container -->
        <div id="calculationError" class="error-message" style="margin-top: 15px;"></div>

        <button onclick="calculate()">Calculate</button>

        <!-- Results section remains same -->
    </div>

    <script>
        function showError(elementId, message) {
            const errorElement = document.getElementById(elementId);
            errorElement.textContent = message;
            errorElement.style.display = 'block';
        }

        function hideErrors() {
            document.querySelectorAll('.error-message').forEach(el => {
                el.style.display = 'none';
            });
        }

        function validateInputs() {
            let isValid = true;
            const requiredFields = [
                'wallArea', 'brickLength', 'brickWidth', 'brickHeight',
                'dailyCapacity', 'cementDensity', 'wastage'
            ];

            requiredFields.forEach(fieldId => {
                const value = parseFloat(document.getElementById(fieldId).value);
                if (isNaN(value) || value <= 0) {
                    showError(`${fieldId}Error`, `Invalid ${fieldId.replace(/([A-Z])/g, ' $1').toLowerCase()}`);
                    isValid = false;
                }
            });

            // Validate mortar ratio format
            const ratioInput = document.getElementById('mortarRatio').value;
            if (!/^\d+:\d+$/.test(ratioInput)) {
                showError('calculationError', 'Invalid mortar ratio format. Use format like 1:4');
                isValid = false;
            }

            return isValid;
        }

        function calculate() {
            try {
                hideErrors();
                if (!validateInputs()) return;

                // Rest of the calculation logic remains same
                // Add additional validation checks in calculations
                
                // After calculations:
                if (isNaN(bricksNeeded) || isNaN(cementKg) || isNaN(sandVolume) || isNaN(daysNeeded)) {
                    throw new Error('Invalid calculation results');
                }

                // Update display logic

            } catch (error) {
                showError('calculationError', 'Calculation error: Please check all inputs are valid numbers');
                console.error('Detailed error:', error);
            }
        }
    </script>
</body>
</html>
